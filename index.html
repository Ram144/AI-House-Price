<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>AI House Price ‚Äî Pro Demo</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <h1>üè† AI House Price ‚Äî Pro Demo</h1>
        <form method="post">
            <label>Size (m¬≤):</label>
            <input type="range" name="size" min="20" max="400" value="{{ request.form.size or 100 }}" oninput="this.nextElementSibling.value = this.value">
            <output>{{ request.form.size or 100 }}</output>
        
            <div class="form-group">
                <label>Rooms:</label>
                <input type="number" name="rooms" min="1" max="10" value="{{ request.form.rooms or 3 }}">
            </div>
            <div class="form-group">
                <label>Bathrooms:</label>
                <input type="number" name="bathrooms" min="1" max="6" value="{{ request.form.bathrooms or 1 }}">
            </div>
            <div class="form-group">
                <label>Age (years):</label>
                <input type="number" name="age" min="0" max="200" value="{{ request.form.age or 10 }}">
            </div>
        
            <div class="form-checkboxes">
                <label><input type="checkbox" name="garage" {% if request.form.garage %}checked{% endif %}> Garage</label>
                <label><input type="checkbox" name="balcony" {% if request.form.balcony %}checked{% endif %}> Balcony</label>
            </div>
        
            <button type="submit">Predict</button>
        </form>
        
        {% if price %}
        <div class="result">
            <h2>Predicted Price: {{ price }} k$</h2>
            {% if confidence %}<p>Confidence: {{ confidence }}%</p>{% endif %}
            {% if summary %}<p class="summary">{{ summary }}</p>{% endif %}
        </div>
        <div class="plot">
            <h3>Model visualization</h3>
            <img src="/static/prediction_plot.png" alt="prediction plot" width="700">
        </div>
        {% endif %}

        <div class="history">
            <h3>Recent Predictions (last 10)</h3>
            <table>
                <tr><th>Time (UTC)</th><th>Size</th><th>Rooms</th><th>Bath</th><th>Age</th><th>Garage</th><th>Balcony</th><th>Pred (k$)</th><th>Conf</th></tr>
                {% for row in history %}
                <tr>
                    <td>{{ row['timestamp'] }}</td>
                    <td>{{ row['size_m2'] }}</td>
                    <td>{{ row['rooms'] }}</td>
                    <td>{{ row['bathrooms'] }}</td>
                    <td>{{ row['age'] }}</td>
                    <td>{{ row['garage'] }}</td>
                    <td>{{ row['balcony'] }}</td>
                    <td>{{ row['predicted_k'] }}</td>
                    <td>{{ row['confidence'] }}</td>
                </tr>
                {% endfor %}
            </table>
        </div>
    </div>
</body>
</html>
